<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: radiant | Fun On Rails]]></title>
  <link href="funonrails.com/categories/radiant/atom.xml" rel="self"/>
  <link href="funonrails.com/"/>
  <updated>2014-02-19T01:29:46+05:30</updated>
  <id>funonrails.com/</id>
  <author>
    <name><![CDATA[sandipransing]]></name>
    <email><![CDATA[sandip@funonrails.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Multiple sites hosting using radiant cms]]></title>
    <link href="funonrails.com/2010/08/multiple-sites-hosting-using-radiant/"/>
    <updated>2010-08-07T20:49:00+05:30</updated>
    <id>funonrails.com/2010/08/multiple-sites-hosting-using-radiant</id>
    <content type="html"><![CDATA[<p>This involves 4-5 simple in-order to get multiple sites working using radiant cms. Follow the below steps one by one.</p>

<h4>Setup radiant cms</h4>

<p>first Install radiant gem</p>

<p><code>
sudo gem install radiant
</code>
set &lsquo;radiant&rsquo; under path</p>

<p><code>
export PATH=$PATH:/var/lib/gems/1.8/gems/radiant-0.8.0/bin
</code></p>

<p>Now, As we are done with radiant installation lets create new project.</p>

<p><code>
$ radiant multisite -d mysql
</code></p>

<h4>Edit database config</h4>

<p><code>
$ cd multisite/
$ vi config/database.yml
development:
  adapter: mysql
  database: multisite_development
  username: root
  password: abcd
  host: localhost
</code></p>

<h4>Migrations</h4>

<p><code>
rake db:create
</code></p>

<h4>Run the database bootstrap rake task:</h4>

<p><code>
rake db:bootstrap
This task will destroy any data in the database. Are you sure you want
to continue? [yn] yes
...
Create the admin user (press enter for defaults).
Name (Administrator): admin
Username (admin): admin
Password (radiant):
....
Select a database template:
1. Empty
2. Roasters (a coffee-themed blog or brochure)
3. Simple Blog
4. Styled Blog
....
</code></p>

<h4>Now we are ready to start</h4>

<p><code>
ruby script/server
</code></p>

<p>Open following URL in browser:</p>

<p><code>http://localhost:3000</code></p>

<p>You should see site homepage. To manage site go to admin panel.
<code>http://localhost:3000/admin</code></p>

<p>Now Lets start with multiple sites management</p>

<p><strong>1) Clone multi_site extension into <code>vendor/extensions</code> of your project</strong>
<code>
  cd vendor/extensions/
  git clone git://github.com/zapnap/radiant-multi-site-extension.git multi_site
</code>
<strong>2) Run the extension migrations</strong>
<code>
  rake db:migrate:extensions
</code></p>

<p><strong>3) Run the extension update task</strong>
<code>
  rake radiant:extensions:multi_site:update
</code>
<strong>4) Restart your server</strong></p>

<p>This finishes our multisite installation. Open following URL in browser.</p>

<p><code>http://localhost:3000/admin/sites</code></p>

<p>Add multiple sites as you wanted
```
 Name        Domain pattern     Base domain name</p>

<p>================================================</p>

<p> site 1      sandip             sandip</p>

<p> site 2      gautam             gautam
```</p>

<p>Don&rsquo;t forget to make dns entries in <code>/etc/hosts</code></p>

<p>```</p>

<h1>/etc/hosts</h1>

<p>127.0.0.1 localhost
&hellip;
127.0.0.1 sandip
127.0.0.1 gautam
```
One more, by deault pages created for new sites added are not published.
Please be sure to make them published and modify contents to identify them</p>

<p>Now you can view different sites:</p>

<ol>
<li><a href="http://sandip:3000">http://sandip:3000</a></li>
<li><a href="http://gautam:3000">http://gautam:3000</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Page Cache control in radiant cms]]></title>
    <link href="funonrails.com/2010/03/page-cache-control-in-radiant-cms/"/>
    <updated>2010-03-04T00:43:00+05:30</updated>
    <id>funonrails.com/2010/03/page-cache-control-in-radiant-cms</id>
    <content type="html"><![CDATA[<h2>Radiant Caching</h2>

<p>Radiant cms is very powerful and customizable cms as of now which has inbuilt support for page caching.</p>

<p>Radiant caching mechanisam is somehow similar to action caching in rails.</p>

<p>In latest radiant version i.e. > 0.8 Responsecache has been replaced with Radiant::Cache.</p>

<p>By default radiant cache gets automatically invalidated after every 5 minutes and that is configurable.</p>

<p>The interval is easily configurable by adding following lines inside environment
<code>ruby
if defined? ResponseCache == 'constant'    
  ResponseCache.defaults[:expire_time] = 4.hours
else
  SiteController.cache_timeout = 4.hours
end
</code>
There are situations where automatic cache inavalidation won&rsquo;t work and we need to clear radiant cache on the fly.
There are two ways to do that to invalidate radiant cache immediately.</p>

<h2>1. Navigate to the root of your Radiant project and delete the cache directory</h2>

<p><code>
cd /home/deploy/radiant_site/tmp
rm -r cache
</code></p>

<h2>2. Clearing the page cache from within your code</h2>

<p><code>ruby
if defined? ResponseCache == 'constant'
  ResponseCache.instance.clear
else
  Radiant::Cache.clear
end
</code>
While building website using radiant cms, it happens that there are certain pages they are static and not going to change frequently that time configuring cache expiry time to long interval is going to be always beneficial and for pages which conatins dynamic content (displaying logged in user on homepage), we need to disable radiant cache for such pages. this can be done by using page_options extension.</p>

<h2>Installation for radiant version  0.7</h2>

<p>From your RADIANT_ROOT:</p>

<p><code>
ruby script/extension install page_options
</code></p>

<h2>Installation for radiant version  0.8 and higher</h2>

<p><code>
git clone git://github.com/sandipransing/radiant-page_options-extension.git vendor/extensions/page_options
</code></p>

<p>Restart server</p>

<h2>Usage</h2>

<ol>
<li>Goto /admin/pages</li>
<li>Edit any page</li>
<li>Click on more link and edit cache settings.</li>
</ol>


<p>For more information <a href="http://github.com/avonderluft/radiant-page_options-extension">visit</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Understanding and creating radinat extensions]]></title>
    <link href="funonrails.com/2009/11/understanding-and-creating-radinat/"/>
    <updated>2009-11-10T13:52:00+05:30</updated>
    <id>funonrails.com/2009/11/understanding-and-creating-radinat</id>
    <content type="html"><![CDATA[<div class='post'>
Understanding and creating radinat extensions To start with, first of all lets know what is radiant and why to use it ? Radiant is a open source content management system designed that serves cms needs for small organisations Creating new radint application <pre class='ruby' name='code'><br /> radiant -d  mysql cms<br />    create<br />    create    CHANGELOG<br />    create    CONTRIBUTORS<br />    create    INSTALL<br />    create    LICENSE<br />    create    README<br />    create    config<br />    create    config/environments<br />    .....<br /></pre>Radiant supports extensions. It means one can add extra features to radiant based cms to add extra capabilities. Extension directory structure is almost similar to any standard rails application Radiant Extension Directory structure  <pre class='ruby' name='code'><br />       |-- app<br />              |-- controllers<br />              |-- helpers<br />              |-- models<br />              |-- views<br />       |-- db<br />              |-- migrate<br />              |-- seeds.rb<br />       |-- lib<br />              |-- spec<br />                 |-- controllers<br />                 |-- helpers<br />                 |-- models<br />                 |-- spec.opts<br />                 |-- spec_helper<br />                 |-- views<br /></pre>Creating radiant extension radiant has generators to create new radint extension script/generate extension ExtensionName Lets create session management extension for radint cms It will create directory structure for extension. <pre class='ruby' name='code'><br />script/generate extension session_management<br /></pre><pre class='ruby' name='code'><br />    create    vendor/extensions/session_management/app/controllers<br />    create    vendor/extensions/session_management/app/helpers<br />    create    vendor/extensions/session_management/app/models<br />    create    vendor/extensions/session_management/app/views<br />     create vendor/extensions/session_management/db/migrate<br />     create vendor/extensions/session_management/lib/tasks<br />     create vendor/extensions/session_management/README<br />     create vendor/extensions/session_management/session_management_extension.rb<br />     create<br />vendor/extensions/session_management/lib/tasks/session_management_extension_tasks.rake<br />     create vendor/extensions/session_management/spec/controllers<br />     create vendor/extensions/session_management/spec/models<br />     create vendor/extensions/session_management/spec/views<br />     create vendor/extensions/session_management/spec/helpers<br />     create vendor/extensions/session_management/features/support<br />     create vendor/extensions/session_management/features/step_definitions/admin<br />     create vendor/extensions/session_management/Rakefile<br />     create vendor/extensions/session_management/spec/spec_helper.rb<br />     create vendor/extensions/session_management/spec/spec.opts<br />     create vendor/extensions/session_management/cucumber.yml<br />     create vendor/extensions/session_management/features/support/env.rb<br />     create vendor/extensions/session_management/features/support/paths.rb<br /></pre>Edit session_management_extension.rb where extension version, description and website url can be added. <pre class='ruby' name='code'><br /># require_dependency 'application_controller'<br />class SessionManagementExtension < Radiant::Extension<br />  version "1.0"<br />  description "Describe your extension here"<br />  url "http://yourwebsite.com/session_management"<br />  # define_routes do |map|<br />  # map.namespace :admin, :member => { :remove => :get } do |admin|<br />  #     admin.resources :session_management<br />  # end<br />  # end<br />  def activate<br />    # admin.tabs.add "Session Management", "/admin/session_management", :after =><br />"Layouts", :visibility => [:all]<br />  end<br />  def deactivate<br />    # admin.tabs.remove "Session Management"<br />  end<br /></pre>In activate block, specify what are the library files , modules that needs to be activated while application starts. In my case, activate method looks like below.. <pre class='ruby' name='code'><br />  def activate<br />    # admin.tabs.add "Session Management", "/admin/session_management", :after =><br />"Layouts", :visibility => [:all]<br />   ApplicationController.send(:include, SessionManagementExt::ApplicationControllerExt)<br />  end<br /></pre>Generating models and controllers. <pre class='ruby' name='code'><br /> script/generate extension_model session_management session_info<br />session_id:string url:string ip:string<br /></pre>In above command first attribute is the extension name and next is model name and rest specifies attributes that needs to created. It will create <pre class='ruby' name='code'><br />     exists   app/models/<br />     exists   spec/models/<br />     create   app/models/session_info.rb<br />     create   spec/models/session_info_spec.rb<br />     exists   db/migrate<br />     create   db/migrate/20091110075042_create_session_infos.rb<br /></pre>Generating controller <pre class='ruby' name='code'><br />script/generate extension_controller session_management admin/session_managements<br /></pre>It will create an output <pre class='ruby' name='code'><br />create app/controllers/admin<br />     create app/helpers/admin<br />     create app/views/admin/session_managements<br />     create spec/controllers/admin<br />     create spec/helpers/admin<br />     create spec/views/admin/session_managements<br />     create spec/controllers/admin/session_managements_controller_spec.rb<br />     create spec/helpers/admin/session_managements_helper_spec.rb<br />     create app/controllers/admin/session_managements_controller.rb<br />     create app/helpers/admin/session_managements_helper.rb<br /></pre>Modify session managements controller for displaying sesssion infos tracked. We need before filter for every request that will capture session, ip and page url so, we need to override behaviour of application controller to add before_filter We have already added ApplicationControllerExt in activate of extension. <pre class='ruby' name='code'><br />   ApplicationController.send(:include, SessionManagementExt::ApplicationControllerExt)<br />Lets look into ApplicationControllerExt module.<br />module SessionManagementExt<br />  module ApplicationControllerExt<br />    def self.included(base)<br />     base.class_eval do<br />       before_filter :track_session<br />     end<br />    end<br />    def track_session<br />     #**"Hello from Session tracker !!!"**<br />     #TODO: location track<br />     # It can be delayed task<br />     #sudo gem install geoip_city -- --with-geoip-dir=/opt/GeoIP<br />     # require 'geoip_city'<br />     # g = GeoIPCity::Database.new('/opt/GeoIP/share/GeoIP/GeoLiteCity.dat')<br />     # res = g.look_up('201.231.22.125')<br />     # {:latitude=>-33.13330078125, :country_code3=>"ARG",<br />:longitude=>-64.3499984741211, :city=>"Río Cuarto", :country_name=>"Argentina",<br />:country_code=>"AR", :region=>"05"}<br />     SessionInfo.create( :ip => request.remote_ip, :page_url =><br />"http://#{request.env["HTTP_HOST"]}#{request.request_uri}", :session_id =><br />request.session.session_id )<br />    end<br />  end<br />end<br /></pre>That's all Creating rake task for extension module here is default genrated rake task for session management under vendor/extensions/session_management/lib/tasks/session_management_extension_tasks.rake It includes task to migrate database and update extension <pre class='ruby' name='code'><br />namespace :radiant do<br />  namespace :extensions do<br />    namespace :session_management do<br />     desc "Runs the migration of the Session Management extension"<br />     task :migrate => :environment do<br />       require 'radiant/extension_migrator'<br />       if ENV["VERSION"]<br />         SessionManagementExtension.migrator.migrate(ENV["VERSION"].to_i)<br />       else<br />         SessionManagementExtension.migrator.migrate<br />       end<br />     end<br />     desc "Copies public assets of the Session Management to the instance public/ directory."<br />     task :update => :environment do<br />       is_svn_or_dir = proc {|path| path =~ /\.svn/ || File.directory?(path) }<br />       puts "Copying assets from SessionManagementExtension"<br />       Dir[SessionManagementExtension.root + "/public/**/*"].reject(&is_svn_or_dir).each do<br />|file|<br />         path = file.sub(SessionManagementExtension.root, '')<br />         directory = File.dirname(path)<br />         mkdir_p RAILS_ROOT + directory, :verbose => false<br />         cp file, RAILS_ROOT + path, :verbose => false<br />       end<br />     end<br />    end<br />  end<br />end<br /></pre>Add as many custom tasks needed inside this file without changing default tasks.  Migrate all radiant extensions <pre class='ruby' name='code'><br />rake db:migrate:extensions<br /></pre></div>

]]></content>
  </entry>
  
</feed>
