---
layout: post
title: "How to map irregular database tables with rails models"
date: 2009-10-21T23:53:00+05:30
comments: false
categories:
 - rails
 - active record
---

<div class='post'>
Rails specifies conventions while creating models, controllers, migrations ( database tables ). <br/><br/><b>Conventions for creating database tables </b>  <br/> 1. Table name should be plural <br/>2. id field should be primary_key for table. <br/>3. foreign_key should be like <model_name>_id i.e. post_id, site_id <br/><br/><b>Conventions for creating models & Controllers </b><br/> 1. Model name should be singular <br/>2. controller name should be plural. <br/> Although rails has standard defined, In some cases it becomes quite necessary to map irregular  <br/><br/><b>1. Table mapping </b><br/><pre class=ruby>class Review < ActiveRecord::Base   # Here comments is name of database table   set_table_name :comments end </pre><br/><b>2. Set primary key ( other than rails standar 'id' primary_key )</b><br/><pre class=ruby>class Review < ActiveRecord::Base   # It assumes "reviews" as table in database   # Below line indicates reviews table contains column_name "reviewId" which is a primary_key   set_primary_key :reviewId end </pre><br/><b>3. Foreign key association </b><br/><pre class=ruby>class Review < ActiveRecord::Base   # Below line indicates reviews table contains column_name 'RatingId' which is foreign_key to primary_key   # of 'ratings' table.   # It can be applied to any associan type [ has_one, has_many, belongs_to, has_many_through ]   belongs_to :rating, :class_name => "SiteUser", :foreign_key => "RatingId" end </pre><br/> <b>4. Model association ( non-standard model name )</b><br/><pre class=ruby>class Review < ActiveRecord::Base   # Below line indicates reviews table contains column_name 'UserId' which is foreign_key to primary_key   # of model with class_name 'SiteUser'   belongs_to :user, :class_name => 'SiteUser', :foreign_key: => 'UserId' end </pre></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>sandipransing</div>
<div class='content'>
confirmed</div>
</div>
<div class='comment'>
<div class='author'>Gautam Rege</div>
<div class='content'>
If is use &quot;set_primary_key :reviewId&quot; in my Class Review model, how do I access the object ?<br><br>What will object#id return? I believe object#id will take the primary key reviewId .. can you confirm this?</div>
</div>
</div>
