---
layout: post
title: "ActiveRecord::ReadOnlyRecord while updating object fetched by joins"
date: 2010-02-15T21:34:00+05:30
comments: false
categories:
 - rails
 - active record
---

<div class='post'>
<b>ActiveRecord find with join options retrieves object as readonly</b><br/><pre class=ruby>station = Station.find( :first, :joins => :call, :conditions => ["customer_id = ? and date(insurance_expiry_date) = ?", customer.id, insurance_expiry_date ] ) </pre><br/> Readonly object cannot modified and hence below line raises "ActiveRecord::ReadOnlyRecord" error. <br/><pre class=ruby>station.update_attributes({ :customer_id => 12 }) </pre><br/>If you have to write on read only object then you can pass following option to find query<br/><pre class=ruby>:readonly => false </pre><br/>Now below find is permitted to do write on fetched object records. <br/><pre class=ruby>station = Station.find( :first, :joins => :call, :conditions => ["customer_id = ? and date(insurance_expiry_date) = ?", customer.id, insurance_expiry_date ], :readonly => false ) </pre></div>
