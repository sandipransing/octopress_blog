
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Working with multiple ruby versions on same server - Fun On Rails</title>
  <meta name="author" content="sandipransing">

  
  <meta name="description" content="click for original postNice post by Michael GreenlyI recently changed how I&#8217;m handling multiple simultaneous Ruby installations and I&#8217;d &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sandipransing.github.io/2009/05/working-with-multiple-ruby-versions-on">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Fun On Rails" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Fun On Rails</a></h1>
  
    <h2>Journal of a Web Developer #ruby #rails #JS</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sandipransing.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Working With Multiple Ruby Versions on Same Server</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-13T20:12:00+05:30" pubdate data-updated="true">May 13<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><div class='post'>
<a href="http://blog.michaelgreenly.com/2008/08/multiple-versions-of-ruby-on-ubuntu-2.html">click for original post</a><strong>Nice post by Michael Greenly</strong><br/><br/>I recently changed how I&#8217;m handling multiple simultaneous Ruby installations and I&#8217;d like to share.<br/><br/>What I needed was to make it convenient to switch between the system provided packages and specific, from source, installations. After some experiments I decided to use &#8216;update-alternatives&#8217; to do it.<br/><br/>Here&#8217;s a quick walk through&#8230;<br/><br/>First I removed all of my Ruby and RubyGem environment variables, they&#8217;re not needed.<br/><br/>Then I installed Ubuntu&#8217;s default Ruby packages via apt-get.<br/><br/>$ sudo apt-get install ruby irb ri rdoc libruby-extras rubygems ruby1.8-dev<br/><br/><br/>Next I downloaded and installed alternate versions of Ruby from source. In this example I&#8217;m going to use two additional versions; the newest stable release and the newest development release.<br/><br/>$ cd /tmp<br/>$ wget -c ftp://ftp.ruby-lang.org/pub/ruby/1.8/ruby-1.8.7-p71.tar.gz<br/>$ tar -xvzf ruby-1.8.7-p71.tar.gz<br/>$ cd ruby-1.8.7-p71<br/>$ ./configure &#8211;prefix=/opt/ruby-1.8.7-p71<br/>$ make<br/>$ sudo make install<br/>$ wget -c ftp://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.0-3.tar.gz<br/>$ tar -xvzf ruby-1.9.0-3.tar.gz<br/>$ ./configure &#8211;prefix=/opt/ruby-ruby-1.9.0-3<br/>$ make<br/>$ sudo make install<br/><br/><br/>At this point I have three versions of Ruby installed and each can be accessed through it&#8217;s full path.<br/><br/>$ /usr/bin/ruby &#8211;version<br/># ruby 1.8.6 (2007-09-24 patchlevel 111) [i486-linux]<br/>$ /opt/ruby-1.8.7-p71/bin/ruby &#8211;version<br/># ruby 1.8.7 (2008-08-08 patchlevel 71) [i686-linux]<br/>$ /opt/ruby-1.9.0-r18217/bin/ruby &#8211;version<br/># ruby 1.9.0 (2008-07-25 revision 18217) [i686-linux]<br/><br/><br/>You&#8217;ll also notice that the default installation is the one provided by Ubuntu.<br/><br/>$ ruby &#8211;version<br/># ruby 1.8.6 (2007-09-24 patchlevel 111) [i486-linux]<br/><br/><br/>Next we&#8217;ll use &#8216;update-alternatives&#8217; to make it a bit easier to switch between them. You could do this on the command line but it becomes a fairly long nasty command so I found it easier to write a quick shell script and run it. The script:<br/><br/>update-alternatives &#8211;install \<br/>/usr/local/bin/ruby ruby /usr/bin/ruby 100 \<br/>&#8211;slave /usr/local/bin/erb erb /usr/bin/erb \<br/>&#8211;slave /usr/local/bin/gem gem /usr/bin/gem \<br/>&#8211;slave /usr/local/bin/irb irb /usr/bin/irb \<br/>&#8211;slave /usr/local/bin/rdoc rdoc /usr/bin/rdoc \<br/>&#8211;slave /usr/local/bin/ri ri /usr/bin/ri \<br/>&#8211;slave /usr/local/bin/testrb testrb /usr/bin/testrb<br/><br/>update-alternatives &#8211;install \<br/>/usr/local/bin/ruby   ruby /opt/ruby-1.8.7-p71/bin/ruby 50 \<br/>&#8211;slave /usr/local/bin/erb erb /opt/ruby-1.8.7-p71/bin/erb \<br/>&#8211;slave /usr/local/bin/gem gem /opt/ruby-1.8.7-p71/bin/gem \<br/>&#8211;slave /usr/local/bin/irb irb /opt/ruby-1.8.7-p71/bin/irb \<br/>&#8211;slave /usr/local/bin/rdoc rdoc /opt/ruby-1.8.7-p71/bin/rdoc \<br/>&#8211;slave /usr/local/bin/ri ri /opt/ruby-1.8.7-p71/bin/ri \<br/>&#8211;slave /usr/local/bin/testrb testrb /opt/ruby-1.8.7-p71/bin/testrb<br/><br/>update-alternatives &#8211;install \<br/>/usr/local/bin/ruby   ruby /opt/ruby-1.9.0-r18217/bin/ruby 25 \<br/>&#8211;slave /usr/local/bin/erb erb /opt/ruby-1.9.0-r18217/bin/erb \<br/>&#8211;slave /usr/local/bin/gem gem /opt/ruby-1.9.0-r18217/bin/gem \<br/>&#8211;slave /usr/local/bin/irb irb /opt/ruby-1.9.0-r18217//bin/irb \<br/>&#8211;slave /usr/local/bin/rdoc rdoc /opt/ruby-1.9.0-r18217/bin/rdoc \<br/>&#8211;slave /usr/local/bin/ri ri /opt/ruby-1.9.0-r18217/bin/ri \<br/>&#8211;slave /usr/local/bin/testrb testrb /opt/ruby-1.9.0-r18217/bin/testrb<br/><br/><br/>What that does is create a group of applications under the generic name Ruby. In addition each application has several slave applications tied to it; erb, irb, etc&#8230; In defining each application we specify what symbolic link it will be accessed through and where the application is actually installed. In my case Ubuntu installed Ruby in /usr/bin and the source installed versions are in /opt. All of the installations will be accessed through the generic name Ruby and will have there symbolic links created in /usr/local/bin. I choose /usr/local/bin because it supercedes /usr/bin in the default path.<br/><br/>Before moving on make sure that &#8216;update-alternatives&#8217; sees all of our Ruby installations:<br/><br/>$ update-alternatives &#8211;list ruby<br/># /opt/ruby-1.9.0-r18217/bin/ruby<br/># /opt/ruby-1.8.7-p71/bin/ruby<br/># /usr/bin/ruby<br/><br/><br/>Now switching between them is as easy as running the &#8216;update-alternatives&#8217; command and selecting the number of the installation you&#8217;d like to use. Example:<br/><br/>$ sudo update-alternatives &#8211;config ruby<br/><br/><br/>It&#8217;s important to keep in mind that each installation is separate. So for example if you install RubyGems while using /usr/bin/ruby it will not be available to /opt/ruby-1.9.0-r18217/bin/ruby, or /opt/ruby-1.8.7-p71/bin/ruby, etc&#8230;.<br/><br/>While it&#8217;s probably possible to use a shared repository for RubyGems across multiple installations I haven&#8217;t tried it and instead have choosen to use multiple separate RubyGem installs, one for each Ruby installation.<br/><br/>Also RubyGem&#8217;s bindir will most likely not be in your path. To get around this I created a short script called &#8216;gemexec&#8217; in /usr/local/bin<br/><br/>#!/usr/bin/env ruby<br/><br/>require &#8216;rubygems&#8217;<br/><br/>if ARGV.size &gt; 1<br/>exec &#8220;#{Gem.bindir}/#{ARGV.shift}&#8221;,ARGV.join(&#8221; &#8220;)<br/>else<br/>exec &#8220;#{Gem.bindir}/#{ARGV.shift}&#8221;<br/>end<br/><br/><br/>This script uses the RubyGems installation of the currently selected Ruby to determine where the executable gem should be found, then runs it with any additional command line arguments provided. example:<br/><br/>$ gemexec rake &#8211;version<br/># rake, version 0.8.1<br/><br/><br/>With all that in place the only thing to watch out for is other peoples scripts that hardcode the shebang line with something like &#8220;#!/usr/bin/ruby&#8221;. What I do myself, and prefer in general, is to use &#8220;#!/usr/bin/env ruby&#8221;.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>sitemap « Fun On Rails</div>
<div class='content'>
[&#8230;] Working with multiple ruby versions on same server « Fun On Rails [&#8230;]</div>
</div>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">sandipransing</span></span>

      








  


<time datetime="2009-05-13T20:12:00+05:30" pubdate data-updated="true">May 13<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/installation/'>installation</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sandipransing.github.io/2009/05/working-with-multiple-ruby-versions-on/" data-via="sandipransing" data-counturl="http://sandipransing.github.io/2009/05/working-with-multiple-ruby-versions-on/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2009/05/ruby-187-and-rails-installation-on/" title="Previous Post: Ruby 1.8.7 and rails installation on ubuntu interpid">&laquo; Ruby 1.8.7 and rails installation on ubuntu interpid</a>
      
      
        <a class="basic-alignment right" href="/2009/05/vi-vim-shortcuts/" title="Next Post: vi / vim Shortcuts">vi / vim Shortcuts &raquo;</a>
      
    </p>
  </footer>
</article>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/02/migrating-from-blogger-to-octopress/">Migrating from blogger to octopress</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/writing-octopress-blog-posts-using-markdown/">Writing Octopress blog posts using markdown</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/octopress-powered-and-github-hosted-blog/">Getting started: Octopress powered and Github hosted blog</a>
      </li>
    
      <li class="post">
        <a href="/2012/10/dynamic-conditions-to-rails-associations/">Dynamic conditions to rails associations</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/upgrading-from-rails-21x-to-rails-2311/">Upgrading from Rails 2.1.x to Rails 2.3.11</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/sandipransing">@sandipransing</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sandipransing',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - sandipransing -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  








  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
